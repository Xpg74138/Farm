{"version":3,"file":"index-0le9uUnr.js","sources":["../../src/controllers/Router.ts","../../src/models/Farmer.ts","../../src/models/Market.ts","../../src/services/EventManager.ts","../../src/models/GameState.ts","../../src/components/Button.ts","../../src/pages/StartPage.ts","../../src/pages/FarmerGamePage.ts","../../src/pages/SettingsPage.ts","../../src/services/SaveService.ts","../../src/services/EventService.ts","../../src/controllers/GameController.ts","../../src/main.ts"],"sourcesContent":["export class Router {\n  private currentRoute: string;\n  private routes: Map<string, HTMLElement>;\n  private rootElement: HTMLElement;\n\n  constructor(rootElement: HTMLElement) {\n    this.currentRoute = 'start';\n    this.routes = new Map();\n    this.rootElement = rootElement;\n    \n    // 监听hash变化\n    window.addEventListener('hashchange', () => {\n      this.handleHashChange();\n    });\n  }\n\n  // 注册路由\n  registerRoute(route: string, element: HTMLElement): void {\n    this.routes.set(route, element);\n    element.className = `page ${route === this.currentRoute ? '' : 'hidden'}`;\n    this.rootElement.appendChild(element);\n  }\n\n  // 导航到路由\n  navigate(route: string): void {\n    if (this.routes.has(route)) {\n      // 隐藏当前页面\n      const currentElement = this.routes.get(this.currentRoute);\n      if (currentElement) {\n        currentElement.classList.add('hidden');\n      }\n      \n      // 显示新页面\n      const newElement = this.routes.get(route);\n      if (newElement) {\n        newElement.classList.remove('hidden');\n      }\n      \n      // 更新当前路由\n      this.currentRoute = route;\n      window.location.hash = route;\n    }\n  }\n\n  // 获取当前路由\n  getCurrentRoute(): string {\n    return this.currentRoute;\n  }\n\n  // 处理hash变化\n  private handleHashChange(): void {\n    const hash = window.location.hash.slice(1) || 'start';\n    if (this.routes.has(hash)) {\n      this.navigate(hash);\n    }\n  }\n\n  // 初始化路由\n  init(): void {\n    const hash = window.location.hash.slice(1) || 'start';\n    this.navigate(hash);\n  }\n}","import type { FarmerState } from '../types/game';\n\nexport class Farmer {\n  private state: FarmerState;\n  private readonly BASE_MAX_PIGS = 5; // 基础最大猪数量\n  private readonly PEN_UPGRADE_COST = 1000; // 猪舍升级成本\n  private readonly PEN_UPGRADE_INCREASE = 5; // 每次升级增加的猪数量\n  private readonly FEED_PER_PIG = 2; // 每头猪每天消耗的饲料量\n\n  constructor() {\n    this.state = this.getInitialState();\n  }\n\n  // 获取初始状态\n  private getInitialState(): FarmerState {\n    const initialFatteningPigs = 2;\n    const initialReadyPigs = 0;\n    const initialTotalPigs = initialFatteningPigs + initialReadyPigs;\n    \n    return {\n      money: 1000,\n      feedStock: 50,\n      feedConsumption: initialTotalPigs * this.FEED_PER_PIG,\n      fatteningPigs: initialFatteningPigs,\n      readyPigs: initialReadyPigs,\n      maxPigs: this.BASE_MAX_PIGS\n    };\n  }\n\n  // 获取当前状态\n  getState(): FarmerState {\n    return { ...this.state };\n  }\n\n  // 设置状态\n  setState(state: Partial<FarmerState>): void {\n    this.state = { ...this.state, ...state };\n  }\n\n  // 购买饲料\n  buyFeed(amount: number, price: number): boolean {\n    const totalCost = parseFloat((amount * price).toFixed(2));\n    if (this.state.money < totalCost) {\n      return false; // 资金不足\n    }\n    \n    this.state.money = parseFloat((this.state.money - totalCost).toFixed(2));\n    this.state.feedStock = parseFloat((this.state.feedStock + amount).toFixed(2));\n    return true;\n  }\n\n  // 购买猪\n  buyPig(amount: number, cost: number): boolean {\n    const totalCost = parseFloat((amount * cost).toFixed(2));\n    const totalPigs = this.state.fatteningPigs + this.state.readyPigs + amount;\n    if (this.state.money < totalCost || totalPigs > this.state.maxPigs) {\n      return false; // 资金不足或猪舍已满\n    }\n    \n    this.state.money = parseFloat((this.state.money - totalCost).toFixed(2));\n    this.state.fatteningPigs = parseFloat((this.state.fatteningPigs + amount).toFixed(2));\n    return true;\n  }\n\n  // 出售猪\n  sellPig(amount: number, revenuePerPig: number): boolean {\n    if (this.state.readyPigs < amount) {\n      return false; // 可出栏猪数量不足\n    }\n    \n    const totalRevenue = parseFloat((amount * revenuePerPig).toFixed(2));\n    this.state.money = parseFloat((this.state.money + totalRevenue).toFixed(2));\n    this.state.readyPigs = parseFloat((this.state.readyPigs - amount).toFixed(2));\n    return true;\n  }\n\n  // 升级猪舍\n  upgradePen(): boolean {\n    if (this.state.money < this.PEN_UPGRADE_COST) {\n      return false; // 资金不足\n    }\n    \n    this.state.money = parseFloat((this.state.money - this.PEN_UPGRADE_COST).toFixed(2));\n    this.state.maxPigs = parseFloat((this.state.maxPigs + this.PEN_UPGRADE_INCREASE).toFixed(2));\n    return true;\n  }\n\n  // 一天过去\n  passDay(): void {\n    // 计算总猪数量\n    const totalPigs = this.state.fatteningPigs + this.state.readyPigs;\n    \n    // 计算饲料消耗量（每猪每天2单位）\n    const feedConsumption = parseFloat(\n      Math.min(this.state.feedStock, totalPigs * this.FEED_PER_PIG).toFixed(2)\n    );\n    this.state.feedConsumption = feedConsumption;\n    this.state.feedStock = parseFloat((this.state.feedStock - feedConsumption).toFixed(2));\n    \n    // 只有当饲料充足时，育肥猪才会成长\n    if (feedConsumption >= totalPigs * this.FEED_PER_PIG) {\n      // 计算育肥猪成长\n      const newReadyPigs = Math.floor(this.state.fatteningPigs * 0.2); // 20%的育肥猪成长为可出栏猪\n      if (newReadyPigs > 0) {\n        this.state.fatteningPigs = parseFloat((this.state.fatteningPigs - newReadyPigs).toFixed(2));\n        this.state.readyPigs = parseFloat((this.state.readyPigs + newReadyPigs).toFixed(2));\n      }\n    }\n  }\n}","import type { MarketState } from '../types/game';\n\nexport class Market {\n  private state: MarketState;\n  private readonly BASE_PORK_PRICE = 20; // 基础猪肉价格\n  private readonly BASE_FEED_PRICE = 5; // 基础饲料价格\n  private readonly BASE_PIGLET_PRICE = 250; // 基础仔猪价格\n  private readonly PORK_PRICE_FLUCTUATION = 0.2; // 猪肉价格波动幅度（20%）\n  private readonly FEED_PRICE_FLUCTUATION = 0.2; // 饲料价格波动幅度（20%）\n  private readonly PIGLET_PRICE_FLUCTUATION = 0.2; // 仔猪价格波动幅度（20%）\n  private readonly PIGLET_PRICE_MIN = 200; // 仔猪最低价格\n  private readonly PIGLET_PRICE_MAX = 300; // 仔猪最高价格\n\n  constructor() {\n    this.state = this.getInitialState();\n  }\n\n  // 获取初始状态\n  private getInitialState(): MarketState {\n    return {\n      porkPrice: this.BASE_PORK_PRICE,\n      feedPrice: this.BASE_FEED_PRICE,\n      pigletPrice: this.BASE_PIGLET_PRICE\n    };\n  }\n\n  // 获取当前状态\n  getState(): MarketState {\n    return { ...this.state };\n  }\n\n  // 设置状态\n  setState(state: Partial<MarketState>): void {\n    this.state = { ...this.state, ...state };\n  }\n\n  // 更新市场状态（每天）\n  updateMarket(): void {\n    // 猪肉价格随机波动\n    const porkPriceVariation = this.BASE_PORK_PRICE * this.PORK_PRICE_FLUCTUATION;\n    this.state.porkPrice = parseFloat(\n      (this.BASE_PORK_PRICE + (Math.random() * porkPriceVariation * 2 - porkPriceVariation)).toFixed(2)\n    );\n\n    // 饲料价格随机波动\n    const feedPriceVariation = this.BASE_FEED_PRICE * this.FEED_PRICE_FLUCTUATION;\n    this.state.feedPrice = parseFloat(\n      (this.BASE_FEED_PRICE + (Math.random() * feedPriceVariation * 2 - feedPriceVariation)).toFixed(2)\n    );\n\n    // 仔猪价格在200-300之间随机波动\n    const pigletPriceVariation = this.BASE_PIGLET_PRICE * this.PIGLET_PRICE_FLUCTUATION;\n    let newPigletPrice = parseFloat(\n      (this.BASE_PIGLET_PRICE + (Math.random() * pigletPriceVariation * 2 - pigletPriceVariation)).toFixed(2)\n    );\n    // 确保仔猪价格在200-300之间\n    this.state.pigletPrice = parseFloat(\n      Math.max(this.PIGLET_PRICE_MIN, Math.min(this.PIGLET_PRICE_MAX, newPigletPrice)).toFixed(2)\n    );\n  }\n\n  // 获取当前市场摘要\n  getMarketSummary(): string {\n    return `猪肉价格：¥${this.state.porkPrice}/kg，饲料价格：¥${this.state.feedPrice}/单位，仔猪价格：¥${this.state.pigletPrice}/只`;\n  }\n}","import type { GameEventData, EventType } from '../types/game';\n\nexport class EventManager {\n  private eventTemplates: Array<{\n    title: string;\n    description: string;\n    type: EventType;\n    probability: number; // 触发概率（0-1）\n    effect: {\n      money?: number;\n      feedStock?: number;\n      fatteningPigs?: number;\n      readyPigs?: number;\n    };\n  }>;\n\n  constructor() {\n    // 事件模板\n    this.eventTemplates = [\n      {\n        title: '市场需求上升',\n        description: '最近猪肉市场需求增加，价格可能会上涨。',\n        type: 'opportunity',\n        probability: 0.3,\n        effect: {\n          money: 100\n        }\n      },\n      {\n        title: '饲料价格波动',\n        description: '由于天气原因，饲料价格出现了波动。',\n        type: 'warning',\n        probability: 0.25,\n        effect: {\n          money: -50\n        }\n      },\n      {\n        title: '猪群健康问题',\n        description: '部分猪出现了健康问题，需要额外的饲料和护理。',\n        type: 'danger',\n        probability: 0.15,\n        effect: {\n          money: -100,\n          feedStock: -20,\n          fatteningPigs: -1\n        }\n      },\n      {\n        title: '政府补贴',\n        description: '政府推出了养猪补贴政策，你获得了一笔补贴。',\n        type: 'opportunity',\n        probability: 0.1,\n        effect: {\n          money: 200\n        }\n      },\n      {\n        title: '技术培训',\n        description: '参加了养猪技术培训，学到了新的养殖方法。',\n        type: 'info',\n        probability: 0.2,\n        effect: {\n          money: -50,\n          fatteningPigs: 1\n        }\n      },\n      {\n        title: '新客户订单',\n        description: '收到了一个大额猪肉订单，可以获得额外收入。',\n        type: 'opportunity',\n        probability: 0.15,\n        effect: {\n          money: 300\n        }\n      },\n      {\n        title: '设备损坏',\n        description: '猪舍的一些设备损坏了，需要维修。',\n        type: 'danger',\n        probability: 0.1,\n        effect: {\n          money: -150\n        }\n      },\n      {\n        title: '饲料丰收',\n        description: '附近的饲料厂丰收，饲料价格下降。',\n        type: 'info',\n        probability: 0.2,\n        effect: {\n          feedStock: 30,\n          money: -50\n        }\n      }\n    ];\n  }\n\n  // 生成随机事件\n  generateRandomEvent(day: number): GameEventData | null {\n    // 随机选择一个事件模板\n    const random = Math.random();\n    let cumulativeProbability = 0;\n    \n    for (const template of this.eventTemplates) {\n      cumulativeProbability += template.probability;\n      if (random <= cumulativeProbability) {\n        // 生成事件\n        return {\n          id: `event-${Date.now()}-${Math.floor(Math.random() * 1000)}`,\n          title: template.title,\n          description: template.description,\n          type: template.type,\n          day,\n          resolved: false,\n          effect: template.effect\n        };\n      }\n    }\n    \n    return null;\n  }\n\n  // 生成每日事件列表\n  generateDailyEvents(day: number, count: number = 2): GameEventData[] {\n    const events: GameEventData[] = [];\n    \n    for (let i = 0; i < count; i++) {\n      const event = this.generateRandomEvent(day);\n      if (event) {\n        events.push(event);\n      }\n    }\n    \n    return events;\n  }\n\n  // 应用事件效果\n  applyEventEffect(event: GameEventData): {\n    money: number;\n    feedStock: number;\n    fatteningPigs: number;\n    readyPigs: number;\n  } {\n    return {\n      money: event.effect?.money || 0,\n      feedStock: event.effect?.feedStock || 0,\n      fatteningPigs: event.effect?.fatteningPigs || 0,\n      readyPigs: event.effect?.readyPigs || 0\n    };\n  }\n\n  // 解决事件\n  resolveEvent(event: GameEventData): GameEventData {\n    return {\n      ...event,\n      resolved: true\n    };\n  }\n}\n","import type { GameState as GameStateType, GameEventData } from '../types/game';\nimport { Farmer } from './Farmer';\nimport { Market } from './Market';\nimport { EventManager } from '../services/EventManager';\n\nexport class GameState {\n  private state: GameStateType;\n  private farmer: Farmer;\n  private market: Market;\n  private eventManager: EventManager;\n\n  constructor() {\n    this.farmer = new Farmer();\n    this.market = new Market();\n    this.eventManager = new EventManager();\n    this.state = this.getInitialState();\n  }\n\n  // 获取初始状态\n  private getInitialState(): GameStateType {\n    return {\n      characterType: 'farmer', // 固定为养猪人角色\n      pigState: {\n        health: 100,\n        hunger: 50,\n        happiness: 70,\n        weight: 1.0,\n        age: 0,\n        isAlive: true\n      },\n      farmerState: this.farmer.getState(),\n      marketState: this.market.getState(),\n      day: 1,\n      gameSpeed: 3,\n      volume: 50,\n      events: [] // 初始事件列表为空\n    };\n  }\n\n  // 获取当前状态\n  getState(): GameStateType {\n    return {\n      ...this.state,\n      farmerState: this.farmer.getState(),\n      marketState: this.market.getState()\n    };\n  }\n\n  // 加载状态\n  loadState(savedState: GameStateType): void {\n    this.state = {\n      ...savedState,\n      farmerState: savedState.farmerState,\n      marketState: savedState.marketState,\n      events: savedState.events || []\n    };\n    \n    // 更新各个模型的状态\n    this.farmer.setState(savedState.farmerState);\n    this.market.setState(savedState.marketState);\n  }\n\n  // 养猪人角色行为\n  farmerBuyFeed(amount: number): boolean {\n    return this.farmer.buyFeed(amount, this.market.getState().feedPrice);\n  }\n\n  farmerSellPig(amount: number): boolean {\n    // 简化处理，假设每头猪的平均重量为100kg\n    const porkPrice = this.market.getState().porkPrice;\n    const revenuePerPig = 100 * porkPrice;\n    return this.farmer.sellPig(amount, revenuePerPig);\n  }\n\n  farmerBuyPig(amount: number): boolean {\n    // 猪仔价格使用市场中的pigletPrice\n    const pigletPrice = this.market.getState().pigletPrice;\n    return this.farmer.buyPig(amount, pigletPrice);\n  }\n\n  farmerUpgradePen(): boolean {\n    return this.farmer.upgradePen();\n  }\n\n  // 一天过去\n  passDay(): void {\n    this.state.day += 1;\n    \n    // 更新各个实体的状态\n    this.farmer.passDay();\n    this.market.updateMarket();\n    \n    // 生成每日事件\n    this.generateDailyEvents();\n  }\n\n  // 生成每日事件\n  private generateDailyEvents(): void {\n    const newEvents = this.eventManager.generateDailyEvents(this.state.day);\n    this.state.events = [...this.state.events, ...newEvents];\n  }\n\n\n\n  // 获取当前事件列表\n  getEvents(): GameEventData[] {\n    return this.state.events;\n  }\n  \n  // 解决事件并应用效果\n  resolveEvent(eventId: string): boolean {\n    const eventIndex = this.state.events.findIndex(e => e.id === eventId && !e.resolved);\n    if (eventIndex === -1) {\n      return false; // 事件不存在或已解决\n    }\n    \n    const event = this.state.events[eventIndex];\n    if (event.effect) {\n      // 应用事件效果\n      const effect = this.eventManager.applyEventEffect(event);\n      \n      // 更新农民状态\n      const farmerState = this.farmer.getState();\n      this.farmer.setState({\n        ...farmerState,\n        money: parseFloat((farmerState.money + effect.money).toFixed(2)),\n        feedStock: parseFloat(Math.max(0, farmerState.feedStock + effect.feedStock).toFixed(2)),\n        fatteningPigs: parseFloat(Math.max(0, farmerState.fatteningPigs + (effect.fatteningPigs || 0)).toFixed(2)),\n        readyPigs: parseFloat(Math.max(0, farmerState.readyPigs + (effect.readyPigs || 0)).toFixed(2))\n      });\n    }\n    \n    // 标记事件为已解决\n    this.state.events[eventIndex] = this.eventManager.resolveEvent(event);\n    return true;\n  }\n\n  // 设置游戏速度\n  setGameSpeed(speed: number): void {\n    this.state.gameSpeed = Math.max(1, Math.min(5, speed));\n  }\n\n  // 设置音量\n  setVolume(volume: number): void {\n    this.state.volume = Math.max(0, Math.min(100, volume));\n  }\n\n  // 获取养猪人模型实例\n  getFarmer(): Farmer {\n    return this.farmer;\n  }\n\n  // 获取市场模型实例\n  getMarket(): Market {\n    return this.market;\n  }\n}","export class Button {\n  private element: HTMLButtonElement;\n\n  constructor(text: string, onClick: () => void, className: string = 'pixel-btn') {\n    this.element = document.createElement('button');\n    this.element.textContent = text;\n    this.element.className = className;\n    this.element.addEventListener('click', onClick);\n  }\n\n  // 获取DOM元素\n  getElement(): HTMLButtonElement {\n    return this.element;\n  }\n\n  // 设置按钮文本\n  setText(text: string): void {\n    this.element.textContent = text;\n  }\n\n  // 禁用按钮\n  disable(): void {\n    this.element.disabled = true;\n    this.element.classList.add('disabled');\n  }\n\n  // 启用按钮\n  enable(): void {\n    this.element.disabled = false;\n    this.element.classList.remove('disabled');\n  }\n\n  // 销毁按钮（移除事件监听器）\n  destroy(): void {\n    this.element.remove();\n  }\n}","import { Button } from '../components/Button';\n\nexport class StartPage {\n  private element: HTMLDivElement;\n  private onStartGame: () => void;\n  private onLoadGame: () => void;\n  private onSettings: () => void;\n\n  constructor(onStartGame: () => void, onLoadGame: () => void, onSettings: () => void) {\n    this.element = document.createElement('div');\n    this.element.className = 'page start-page';\n    this.onStartGame = onStartGame;\n    this.onLoadGame = onLoadGame;\n    this.onSettings = onSettings;\n    \n    this.render();\n  }\n\n  // 渲染页面\n  private render(): void {\n    // 容器\n    const container = document.createElement('div');\n    container.className = 'pixel-container';\n    \n    // 标题\n    const title = document.createElement('h1');\n    title.className = 'pixel-title';\n    title.textContent = '养猪模拟器';\n    container.appendChild(title);\n    \n    // 副标题\n    const subtitle = document.createElement('h2');\n    subtitle.className = 'pixel-subtitle';\n    subtitle.textContent = '一个有趣的文字模拟经营游戏';\n    container.appendChild(subtitle);\n    \n    // 按钮容器\n    const buttonContainer = document.createElement('div');\n    buttonContainer.style.display = 'flex';\n    buttonContainer.style.flexDirection = 'column';\n    buttonContainer.style.alignItems = 'center';\n    buttonContainer.style.gap = '15px';\n    buttonContainer.style.marginTop = '30px';\n    \n    // 开始游戏按钮\n    const startButton = new Button('开始游戏', this.onStartGame);\n    buttonContainer.appendChild(startButton.getElement());\n    \n    // 加载游戏按钮\n    const loadButton = new Button('加载游戏', this.onLoadGame);\n    buttonContainer.appendChild(loadButton.getElement());\n    \n    // 设置按钮\n    const settingsButton = new Button('设置', this.onSettings);\n    buttonContainer.appendChild(settingsButton.getElement());\n    \n    container.appendChild(buttonContainer);\n    this.element.appendChild(container);\n  }\n\n  // 获取DOM元素\n  getElement(): HTMLDivElement {\n    return this.element;\n  }\n}","import { Button } from '../components/Button';\nimport type { FarmerState, MarketState, GameEventData } from '../types/game';\n\nexport class FarmerGamePage {\n  private element: HTMLDivElement;\n  private onBuyFeed: (amount: number) => void;\n  private onSellPig: (amount: number) => void;\n  private onBuyPig: (amount: number) => void;\n  private onUpgradePen: () => void;\n  private onNextDay: () => void;\n  private onBack: () => void;\n  private onResolveEvent: (eventId: string) => void;\n  private farmerState: FarmerState;\n  private marketState: MarketState;\n  private events: GameEventData[];\n  private day: number;\n\n  constructor(\n    onBuyFeed: (amount: number) => void, \n    onSellPig: (amount: number) => void, \n    onBuyPig: (amount: number) => void, \n    onUpgradePen: () => void, \n    onNextDay: () => void,\n    onBack: () => void,\n    onResolveEvent: (eventId: string) => void\n  ) {\n    this.element = document.createElement('div');\n    this.element.className = 'page farmer-game-page';\n    this.onBuyFeed = onBuyFeed;\n    this.onSellPig = onSellPig;\n    this.onBuyPig = onBuyPig;\n    this.onUpgradePen = onUpgradePen;\n    this.onNextDay = onNextDay;\n    this.onBack = onBack;\n    this.onResolveEvent = onResolveEvent;\n    \n    // 初始状态\n    this.farmerState = {\n      money: 1000,\n      feedStock: 50,\n      feedConsumption: 4, // 初始2头育肥猪，每头2单位饲料\n      fatteningPigs: 2,\n      readyPigs: 0,\n      maxPigs: 5\n    };\n    \n    this.marketState = {\n      porkPrice: 20,\n      feedPrice: 5,\n      pigletPrice: 250\n    };\n    \n    this.events = [];\n    this.day = 1;\n    \n    this.render();\n  }\n\n  // 渲染页面\n  private render(): void {\n    // 游戏容器\n    const gameContainer = document.createElement('div');\n    gameContainer.className = 'game-container';\n    \n    // 标题\n    const title = document.createElement('h1');\n    title.className = 'pixel-title';\n    title.textContent = '养猪场管理';\n    gameContainer.appendChild(title);\n    \n    // 游戏天数显示\n    const dayDisplay = document.createElement('div');\n    dayDisplay.className = 'day-display';\n    dayDisplay.textContent = `第 ${this.day} 天`;\n    gameContainer.appendChild(dayDisplay);\n    \n    // 主游戏区域 - 改为左右布局\n    const mainArea = document.createElement('div');\n    mainArea.className = 'game-main';\n    mainArea.style.display = 'flex';\n    mainArea.style.gap = '30px';\n    mainArea.style.width = '100%';\n    \n    // 左侧事件区域\n    const eventArea = this.createEventArea();\n    mainArea.appendChild(eventArea);\n    \n    // 右侧主内容区域\n    const contentArea = document.createElement('div');\n    contentArea.style.flex = '1';\n    contentArea.style.display = 'flex';\n    contentArea.style.flexDirection = 'column';\n    contentArea.style.gap = '20px';\n    \n    // 农场状态面板\n    const farmStats = document.createElement('div');\n    farmStats.className = 'pixel-container';\n    farmStats.style.width = '100%';\n    \n    // 农场状态标题\n    const farmStatsTitle = document.createElement('h3');\n    farmStatsTitle.className = 'pixel-subtitle';\n    farmStatsTitle.style.fontSize = '20px';\n    farmStatsTitle.textContent = '农场状态';\n    farmStats.appendChild(farmStatsTitle);\n    \n    // 农场状态内容\n    const farmStatsContent = document.createElement('div');\n    farmStatsContent.style.display = 'grid';\n    farmStatsContent.style.gridTemplateColumns = 'repeat(2, 1fr)';\n    farmStatsContent.style.gap = '15px';\n    \n    // 金钱\n    farmStatsContent.appendChild(this.createStatItem('金钱', `¥${this.farmerState.money}`));\n    \n    // 饲料库存\n    farmStatsContent.appendChild(this.createStatItem('饲料库存', `${this.farmerState.feedStock} 单位`));\n    \n    // 饲料消耗量\n    farmStatsContent.appendChild(this.createStatItem('饲料消耗', `${this.farmerState.feedConsumption} 单位/天`));\n    \n    // 育肥猪数量\n    farmStatsContent.appendChild(this.createStatItem('育肥猪', `${this.farmerState.fatteningPigs}`));\n    \n    // 可出栏猪数量\n    farmStatsContent.appendChild(this.createStatItem('可出栏猪', `${this.farmerState.readyPigs}`));\n    \n    // 总猪数量\n    const totalPigs = this.farmerState.fatteningPigs + this.farmerState.readyPigs;\n    farmStatsContent.appendChild(this.createStatItem('总猪数量', `${totalPigs}/${this.farmerState.maxPigs}`));\n    \n    farmStats.appendChild(farmStatsContent);\n    contentArea.appendChild(farmStats);\n    \n    // 市场信息面板\n    const marketPanel = document.createElement('div');\n    marketPanel.className = 'pixel-container';\n    marketPanel.style.width = '100%';\n    \n    // 市场标题\n    const marketTitle = document.createElement('h3');\n    marketTitle.className = 'pixel-subtitle';\n    marketTitle.style.fontSize = '20px';\n    marketTitle.textContent = '市场信息';\n    marketPanel.appendChild(marketTitle);\n    \n    // 市场内容\n    const marketContent = document.createElement('div');\n    marketContent.style.display = 'grid';\n    marketContent.style.gridTemplateColumns = 'repeat(2, 1fr)';\n    marketContent.style.gap = '15px';\n    \n    // 猪肉价格\n    marketContent.appendChild(this.createStatItem('猪肉价格', `¥${this.marketState.porkPrice}/kg`));\n    \n    // 饲料价格\n    marketContent.appendChild(this.createStatItem('饲料价格', `¥${this.marketState.feedPrice}/单位`));\n    \n    // 仔猪价格\n    marketContent.appendChild(this.createStatItem('仔猪价格', `¥${this.marketState.pigletPrice}/只`));\n    \n    marketPanel.appendChild(marketContent);\n    contentArea.appendChild(marketPanel);\n    \n    // 控制按钮\n    const controls = document.createElement('div');\n    controls.className = 'game-controls';\n    controls.style.flexWrap = 'wrap';\n    controls.style.justifyContent = 'center';\n    \n    const buyFeedButton = new Button('购买饲料', () => this.showQuantityModal('购买饲料', this.onBuyFeed, this.calculateMaxBuyFeed()));\n    controls.appendChild(buyFeedButton.getElement());\n    \n    const sellPigButton = new Button('出售猪', () => this.showQuantityModal('出售猪', this.onSellPig, this.farmerState.readyPigs));\n    controls.appendChild(sellPigButton.getElement());\n    \n    const buyPigButton = new Button('购买猪仔', () => this.showQuantityModal('购买猪仔', this.onBuyPig, this.calculateMaxBuyPig()));\n    controls.appendChild(buyPigButton.getElement());\n    \n    const upgradeButton = new Button('升级猪舍', this.onUpgradePen);\n    controls.appendChild(upgradeButton.getElement());\n    \n    // 下一天按钮（单独一行显示）\n    const nextDayButton = new Button('下一天', this.onNextDay);\n    nextDayButton.getElement().style.backgroundColor = '#2E8B57'; // 绿色按钮\n    nextDayButton.getElement().style.marginTop = '15px';\n    nextDayButton.getElement().style.padding = '15px 30px';\n    nextDayButton.getElement().style.fontSize = '18px';\n    controls.appendChild(nextDayButton.getElement());\n    \n    const backButton = new Button('返回', this.onBack);\n    controls.appendChild(backButton.getElement());\n    \n    contentArea.appendChild(controls);\n    \n    // 将右侧内容添加到主区域\n    mainArea.appendChild(contentArea);\n    gameContainer.appendChild(mainArea);\n    \n    this.element.appendChild(gameContainer);\n  }\n\n  // 计算最大可购买饲料数量\n  private calculateMaxBuyFeed(): number {\n    return Math.floor(this.farmerState.money / this.marketState.feedPrice);\n  }\n\n  // 计算最大可购买猪仔数量\n  private calculateMaxBuyPig(): number {\n    const totalPigs = this.farmerState.fatteningPigs + this.farmerState.readyPigs;\n    const availableSpace = this.farmerState.maxPigs - totalPigs;\n    const maxAffordable = Math.floor(this.farmerState.money / this.marketState.pigletPrice);\n    return Math.max(0, Math.min(availableSpace, maxAffordable));\n  }\n\n  // 显示数量选择弹窗\n  private showQuantityModal(title: string, callback: (amount: number) => void, maxAmount: number): void {\n    // 创建弹窗背景\n    const modalOverlay = document.createElement('div');\n    modalOverlay.className = 'modal-overlay';\n    modalOverlay.style.position = 'fixed';\n    modalOverlay.style.top = '0';\n    modalOverlay.style.left = '0';\n    modalOverlay.style.width = '100%';\n    modalOverlay.style.height = '100%';\n    modalOverlay.style.backgroundColor = 'rgba(0, 0, 0, 0.5)';\n    modalOverlay.style.display = 'flex';\n    modalOverlay.style.justifyContent = 'center';\n    modalOverlay.style.alignItems = 'center';\n    modalOverlay.style.zIndex = '1000';\n    \n    // 创建弹窗容器\n    const modal = document.createElement('div');\n    modal.className = 'pixel-container';\n    modal.style.padding = '20px';\n    modal.style.backgroundColor = '#f0e68c';\n    modal.style.border = '3px solid #000';\n    modal.style.borderRadius = '8px';\n    modal.style.width = '300px';\n    modal.style.textAlign = 'center';\n    \n    // 弹窗标题\n    const modalTitle = document.createElement('h3');\n    modalTitle.className = 'pixel-subtitle';\n    modalTitle.style.marginBottom = '15px';\n    modalTitle.textContent = title;\n    modal.appendChild(modalTitle);\n    \n    // 数量输入\n    const inputContainer = document.createElement('div');\n    inputContainer.style.marginBottom = '15px';\n    \n    const label = document.createElement('label');\n    label.textContent = `数量 (最大: ${maxAmount}): `;\n    label.style.display = 'block';\n    label.style.marginBottom = '5px';\n    inputContainer.appendChild(label);\n    \n    const input = document.createElement('input');\n    input.type = 'number';\n    input.min = '1';\n    input.max = maxAmount.toString();\n    input.value = '1';\n    input.style.padding = '8px';\n    input.style.fontSize = '16px';\n    input.style.border = '2px solid #000';\n    input.style.borderRadius = '4px';\n    input.style.width = '100px';\n    input.style.textAlign = 'center';\n    inputContainer.appendChild(input);\n    \n    modal.appendChild(inputContainer);\n    \n    // 按钮容器\n    const buttonContainer = document.createElement('div');\n    buttonContainer.style.display = 'flex';\n    buttonContainer.style.justifyContent = 'space-around';\n    buttonContainer.style.marginTop = '20px';\n    \n    // 确认按钮\n    const confirmButton = new Button('确认', () => {\n      const amount = parseInt(input.value);\n      if (amount >= 1 && amount <= maxAmount) {\n        callback(amount);\n        modalOverlay.remove();\n      }\n    });\n    buttonContainer.appendChild(confirmButton.getElement());\n    \n    // 取消按钮\n    const cancelButton = new Button('取消', () => {\n      modalOverlay.remove();\n    });\n    buttonContainer.appendChild(cancelButton.getElement());\n    \n    modal.appendChild(buttonContainer);\n    modalOverlay.appendChild(modal);\n    document.body.appendChild(modalOverlay);\n    \n    // 聚焦输入框\n    input.focus();\n  }\n\n  // 创建事件区域\n  private createEventArea(): HTMLElement {\n    const eventArea = document.createElement('div');\n    eventArea.className = 'pixel-container';\n    eventArea.style.width = '250px';\n    eventArea.style.height = 'auto';\n    eventArea.style.minHeight = '400px';\n    eventArea.style.display = 'flex';\n    eventArea.style.flexDirection = 'column';\n    \n    // 事件区域标题\n    const eventTitle = document.createElement('h3');\n    eventTitle.className = 'pixel-subtitle';\n    eventTitle.style.fontSize = '20px';\n    eventTitle.textContent = '今日事件';\n    eventArea.appendChild(eventTitle);\n    \n    // 事件列表\n    const eventList = document.createElement('div');\n    eventList.className = 'event-list';\n    eventList.style.flex = '1';\n    eventList.style.overflowY = 'auto';\n    eventList.style.marginTop = '15px';\n    \n    // 显示事件\n    if (this.events.length === 0) {\n      // 没有事件时显示提示\n      const noEvents = document.createElement('div');\n      noEvents.className = 'event-item event-info';\n      noEvents.style.padding = '10px';\n      noEvents.style.textAlign = 'center';\n      noEvents.textContent = '今天没有特殊事件发生。';\n      eventList.appendChild(noEvents);\n    } else {\n      // 显示当前天数的事件\n      const todayEvents = this.events.filter(event => event.day === this.day);\n      \n      if (todayEvents.length === 0) {\n        const noEvents = document.createElement('div');\n        noEvents.className = 'event-item event-info';\n        noEvents.style.padding = '10px';\n        noEvents.style.textAlign = 'center';\n        noEvents.textContent = '今天没有特殊事件发生。';\n        eventList.appendChild(noEvents);\n      } else {\n        // 显示事件\n        todayEvents.forEach(event => {\n          const eventItem = this.createEventItem(event);\n          eventList.appendChild(eventItem);\n        });\n      }\n    }\n    \n    eventArea.appendChild(eventList);\n    \n    return eventArea;\n  }\n\n  // 创建事件项\n  private createEventItem(event: GameEventData): HTMLElement {\n    const eventItem = document.createElement('div');\n    eventItem.className = `event-item event-${event.type} ${event.resolved ? 'resolved' : ''}`;\n    eventItem.style.padding = '10px';\n    eventItem.style.marginBottom = '10px';\n    eventItem.style.borderRadius = '4px';\n    eventItem.style.border = '2px solid #000';\n    eventItem.style.backgroundColor = '#FFFACD';\n    eventItem.style.cursor = event.resolved ? 'default' : 'pointer';\n    eventItem.style.opacity = event.resolved ? '0.7' : '1';\n    \n    // 根据事件类型设置背景色\n    switch (event.type) {\n      case 'opportunity':\n        eventItem.style.backgroundColor = '#98FB98';\n        break;\n      case 'warning':\n        eventItem.style.backgroundColor = '#FFD700';\n        break;\n      case 'danger':\n        eventItem.style.backgroundColor = '#FFB6C1';\n        break;\n    }\n    \n    // 事件标题\n    const eventTitle = document.createElement('h4');\n    eventTitle.style.fontSize = '14px';\n    eventTitle.style.fontWeight = 'bold';\n    eventTitle.style.marginBottom = '5px';\n    eventTitle.textContent = event.title;\n    if (event.resolved) {\n      eventTitle.textContent += ' (已解决)';\n    }\n    eventItem.appendChild(eventTitle);\n    \n    // 事件描述\n    const eventDesc = document.createElement('p');\n    eventDesc.style.fontSize = '12px';\n    eventDesc.textContent = event.description;\n    eventItem.appendChild(eventDesc);\n    \n    // 事件效果（如果有金钱影响）\n    const effectText = this.getEventEffectText(event.title);\n    if (effectText) {\n      const effectEl = document.createElement('p');\n      effectEl.style.fontSize = '12px';\n      effectEl.style.fontWeight = 'bold';\n      effectEl.style.marginTop = '5px';\n      effectEl.style.color = effectText.includes('增加') ? '#2E8B57' : '#DC143C';\n      effectEl.textContent = effectText;\n      eventItem.appendChild(effectEl);\n    }\n    \n    // 添加解决按钮（如果事件未解决）\n    if (!event.resolved) {\n      const resolveButton = document.createElement('button');\n      resolveButton.textContent = '解决';\n      resolveButton.style.marginTop = '10px';\n      resolveButton.style.padding = '5px 10px';\n      resolveButton.style.fontSize = '12px';\n      resolveButton.style.border = '2px solid #000';\n      resolveButton.style.borderRadius = '4px';\n      resolveButton.style.backgroundColor = '#4CAF50';\n      resolveButton.style.color = 'white';\n      resolveButton.style.cursor = 'pointer';\n      resolveButton.onclick = (e) => {\n        e.stopPropagation();\n        this.onResolveEvent(event.id);\n      };\n      eventItem.appendChild(resolveButton);\n    }\n    \n    // 点击事件项也可以解决事件\n    if (!event.resolved) {\n      eventItem.onclick = () => {\n        this.onResolveEvent(event.id);\n      };\n    }\n    \n    return eventItem;\n  }\n  \n  // 获取事件效果文本\n  private getEventEffectText(title: string): string {\n    switch (title) {\n      case '市场需求上升':\n        return '金钱增加：+¥100';\n      case '饲料价格波动':\n        return '金钱减少：-¥50';\n      case '猪群健康问题':\n        return '金钱减少：-¥100，饲料减少：-20单位，育肥猪减少：-1头';\n      case '政府补贴':\n        return '金钱增加：+¥200';\n      case '技术培训':\n        return '金钱减少：-¥50，育肥猪增加：+1头';\n      case '新客户订单':\n        return '金钱增加：+¥300';\n      case '设备损坏':\n        return '金钱减少：-¥150';\n      case '饲料丰收':\n        return '饲料增加：+30单位，金钱减少：-¥50';\n      default:\n        return '';\n    }\n  }\n\n  // 创建状态项\n  private createStatItem(name: string, value: string): HTMLElement {\n    const item = document.createElement('div');\n    item.className = 'stat-item';\n    item.innerHTML = `<span>${name}:</span> <span>${value}</span>`;\n    return item;\n  }\n\n  // 更新状态\n  updateState(farmerState: FarmerState, marketState: MarketState, events: GameEventData[] = [], day: number = 1): void {\n    this.farmerState = farmerState;\n    this.marketState = marketState;\n    this.events = events;\n    this.day = day;\n    \n    // 重新渲染页面\n    this.element.innerHTML = '';\n    this.render();\n  }\n\n  // 获取DOM元素\n  getElement(): HTMLDivElement {\n    return this.element;\n  }\n}","import { Button } from '../components/Button';\n\nexport class SettingsPage {\n  private element: HTMLDivElement;\n  private onBack: () => void;\n  private onSaveSettings: (gameSpeed: number, volume: number) => void;\n  private onClearSaves: () => void;\n  private gameSpeed: number = 3;\n  private volume: number = 50;\n\n  constructor(\n    onBack: () => void, \n    onSaveSettings: (gameSpeed: number, volume: number) => void,\n    onClearSaves: () => void\n  ) {\n    this.element = document.createElement('div');\n    this.element.className = 'page settings-page';\n    this.onBack = onBack;\n    this.onSaveSettings = onSaveSettings;\n    this.onClearSaves = onClearSaves;\n    \n    this.render();\n  }\n\n  // 渲染页面\n  private render(): void {\n    // 容器\n    const container = document.createElement('div');\n    container.className = 'pixel-container';\n    \n    // 标题\n    const title = document.createElement('h1');\n    title.className = 'pixel-title';\n    title.textContent = '设置';\n    container.appendChild(title);\n    \n    // 设置容器\n    const settingsContainer = document.createElement('div');\n    settingsContainer.style.display = 'flex';\n    settingsContainer.style.flexDirection = 'column';\n    settingsContainer.style.gap = '20px';\n    settingsContainer.style.marginTop = '20px';\n    \n    // 游戏速度设置\n    const speedSetting = this.createSliderSetting('游戏速度', 1, 5, this.gameSpeed, (value) => {\n      this.gameSpeed = value;\n    });\n    settingsContainer.appendChild(speedSetting);\n    \n    // 音量设置\n    const volumeSetting = this.createSliderSetting('音量', 0, 100, this.volume, (value) => {\n      this.volume = value;\n    });\n    settingsContainer.appendChild(volumeSetting);\n    \n    container.appendChild(settingsContainer);\n    \n    // 存档管理\n    const saveManagement = document.createElement('div');\n    saveManagement.style.marginTop = '30px';\n    \n    const saveTitle = document.createElement('h3');\n    saveTitle.className = 'pixel-subtitle';\n    saveTitle.style.fontSize = '20px';\n    saveTitle.textContent = '存档管理';\n    saveManagement.appendChild(saveTitle);\n    \n    const clearSavesButton = new Button('清除所有存档', () => {\n      if (confirm('确定要清除所有存档吗？此操作不可恢复！')) {\n        this.onClearSaves();\n      }\n    });\n    saveManagement.appendChild(clearSavesButton.getElement());\n    \n    container.appendChild(saveManagement);\n    \n    // 按钮容器\n    const buttonContainer = document.createElement('div');\n    buttonContainer.style.display = 'flex';\n    buttonContainer.style.justifyContent = 'center';\n    buttonContainer.style.gap = '15px';\n    buttonContainer.style.marginTop = '30px';\n    \n    // 保存设置按钮\n    const saveButton = new Button('保存设置', () => {\n      this.onSaveSettings(this.gameSpeed, this.volume);\n    });\n    buttonContainer.appendChild(saveButton.getElement());\n    \n    // 返回按钮\n    const backButton = new Button('返回', this.onBack);\n    buttonContainer.appendChild(backButton.getElement());\n    \n    container.appendChild(buttonContainer);\n    this.element.appendChild(container);\n  }\n\n  // 创建滑块设置\n  private createSliderSetting(\n    name: string, \n    min: number, \n    max: number, \n    initialValue: number, \n    onChange: (value: number) => void\n  ): HTMLElement {\n    const setting = document.createElement('div');\n    setting.style.display = 'flex';\n    setting.style.flexDirection = 'column';\n    setting.style.gap = '10px';\n    \n    const label = document.createElement('div');\n    label.className = 'pixel-text';\n    label.style.fontWeight = 'bold';\n    label.textContent = name;\n    setting.appendChild(label);\n    \n    const sliderContainer = document.createElement('div');\n    sliderContainer.style.display = 'flex';\n    sliderContainer.style.alignItems = 'center';\n    sliderContainer.style.gap = '10px';\n    \n    const slider = document.createElement('input');\n    slider.type = 'range';\n    slider.min = min.toString();\n    slider.max = max.toString();\n    slider.value = initialValue.toString();\n    slider.className = 'slider';\n    slider.style.flex = '1';\n    slider.style.height = '10px';\n    slider.style.accentColor = '#8B4513';\n    slider.addEventListener('input', (e) => {\n      const value = parseInt((e.target as HTMLInputElement).value);\n      onChange(value);\n      valueDisplay.textContent = value.toString();\n    });\n    \n    const valueDisplay = document.createElement('span');\n    valueDisplay.className = 'pixel-text';\n    valueDisplay.textContent = initialValue.toString();\n    valueDisplay.style.minWidth = '30px';\n    valueDisplay.style.textAlign = 'right';\n    \n    sliderContainer.appendChild(slider);\n    sliderContainer.appendChild(valueDisplay);\n    setting.appendChild(sliderContainer);\n    \n    return setting;\n  }\n\n  // 获取DOM元素\n  getElement(): HTMLDivElement {\n    return this.element;\n  }\n\n  // 设置初始值\n  setInitialValues(gameSpeed: number, volume: number): void {\n    this.gameSpeed = gameSpeed;\n    this.volume = volume;\n    \n    // 重新渲染页面以更新滑块值\n    this.element.innerHTML = '';\n    this.render();\n  }\n}","import type { GameSave, GameState } from '../types/game';\n\nexport class SaveService {\n  private static readonly SAVE_KEY = 'pigFarmSimulator_saves';\n  private static readonly AUTO_SAVE_KEY = 'pigFarmSimulator_autoSave';\n\n  // 获取所有存档\n  static getAllSaves(): GameSave[] {\n    const savesJson = localStorage.getItem(this.SAVE_KEY);\n    return savesJson ? JSON.parse(savesJson) : [];\n  }\n\n  // 保存游戏\n  static saveGame(name: string, state: GameState): void {\n    const saves = this.getAllSaves();\n    const save: GameSave = {\n      id: Date.now().toString(),\n      name,\n      timestamp: Date.now(),\n      state\n    };\n    saves.push(save);\n    localStorage.setItem(this.SAVE_KEY, JSON.stringify(saves));\n  }\n\n  // 自动保存\n  static autoSave(state: GameState): void {\n    localStorage.setItem(this.AUTO_SAVE_KEY, JSON.stringify(state));\n  }\n\n  // 加载自动存档\n  static loadAutoSave(): GameState | null {\n    const autoSaveJson = localStorage.getItem(this.AUTO_SAVE_KEY);\n    return autoSaveJson ? JSON.parse(autoSaveJson) : null;\n  }\n\n  // 加载指定存档\n  static loadGame(id: string): GameState | null {\n    const saves = this.getAllSaves();\n    const save = saves.find(s => s.id === id);\n    return save ? save.state : null;\n  }\n\n  // 删除存档\n  static deleteSave(id: string): void {\n    const saves = this.getAllSaves();\n    const updatedSaves = saves.filter(s => s.id !== id);\n    localStorage.setItem(this.SAVE_KEY, JSON.stringify(updatedSaves));\n  }\n\n  // 清除所有存档\n  static clearAllSaves(): void {\n    localStorage.removeItem(this.SAVE_KEY);\n    localStorage.removeItem(this.AUTO_SAVE_KEY);\n  }\n}","import type { GameInternalEvent } from '../types/game';\n\nexport class EventService {\n  private listeners: Map<string, Array<(event: GameInternalEvent) => void>> = new Map();\n\n  // 订阅事件\n  subscribe(eventType: string, callback: (event: GameInternalEvent) => void): void {\n    if (!this.listeners.has(eventType)) {\n      this.listeners.set(eventType, []);\n    }\n    this.listeners.get(eventType)?.push(callback);\n  }\n\n  // 取消订阅\n  unsubscribe(eventType: string, callback: (event: GameInternalEvent) => void): void {\n    const callbacks = this.listeners.get(eventType);\n    if (callbacks) {\n      const index = callbacks.indexOf(callback);\n      if (index !== -1) {\n        callbacks.splice(index, 1);\n      }\n    }\n  }\n\n  // 发布事件\n  publish(event: GameInternalEvent): void {\n    const callbacks = this.listeners.get(event.type);\n    if (callbacks) {\n      callbacks.forEach(callback => callback(event));\n    }\n  }\n\n  // 清除所有监听器\n  clear(): void {\n    this.listeners.clear();\n  }\n}","import { Router } from './Router';\nimport { GameState } from '../models/GameState';\nimport { StartPage } from '../pages/StartPage';\nimport { FarmerGamePage } from '../pages/FarmerGamePage';\nimport { SettingsPage } from '../pages/SettingsPage';\nimport { SaveService } from '../services/SaveService';\nimport { EventService } from '../services/EventService';\n\nexport class GameController {\n  private router: Router;\n  private gameState: GameState;\n  private eventService: EventService;\n  private autoSaveInterval: number | null = null;\n  \n  // 页面实例\n  private startPage: StartPage;\n  private farmerGamePage: FarmerGamePage;\n  private settingsPage: SettingsPage;\n\n  constructor(appElement: HTMLElement) {\n    this.router = new Router(appElement);\n    this.gameState = new GameState();\n    this.eventService = new EventService();\n    \n    // 初始化页面\n    this.startPage = new StartPage(\n      () => this.startGame(),\n      () => this.loadGame(),\n      () => this.router.navigate('settings')\n    );\n    \n    this.farmerGamePage = new FarmerGamePage(\n      (amount: number) => this.handleFarmerAction('buyFeed', amount),\n      (amount: number) => this.handleFarmerAction('sellPig', amount),\n      (amount: number) => this.handleFarmerAction('buyPig', amount),\n      () => this.handleFarmerAction('upgradePen'),\n      () => this.nextDay(),\n      () => this.router.navigate('start'),\n      (eventId: string) => this.resolveEvent(eventId)\n    );\n    \n    this.settingsPage = new SettingsPage(\n      () => this.router.navigate('start'),\n      (gameSpeed, volume) => this.saveSettings(gameSpeed, volume),\n      () => this.clearSaves()\n    );\n  }\n\n  // 初始化游戏\n  init(): void {\n    // 注册路由\n    this.router.registerRoute('start', this.startPage.getElement());\n    this.router.registerRoute('farmer-game', this.farmerGamePage.getElement());\n    this.router.registerRoute('settings', this.settingsPage.getElement());\n    \n    // 加载自动存档（但不自动导航）\n    const autoSave = SaveService.loadAutoSave();\n    if (autoSave) {\n      this.gameState.loadState(autoSave);\n      this.updateGameUI();\n    }\n    \n    // 初始化路由（根据URL hash或默认值导航）\n    this.router.init();\n    \n    // 设置自动保存（每30秒）\n    this.autoSaveInterval = window.setInterval(() => {\n      this.autoSave();\n    }, 30000);\n  }\n\n  // 手动推进到下一天\n  nextDay(): void {\n    this.gameState.passDay();\n    this.updateGameUI();\n    this.autoSave();\n  }\n\n  // 开始游戏\n  private startGame(): void {\n    this.router.navigate('farmer-game');\n    this.updateGameUI();\n  }\n\n  // 加载游戏\n  private loadGame(): void {\n    const autoSave = SaveService.loadAutoSave();\n    if (autoSave) {\n      this.gameState.loadState(autoSave);\n      this.router.navigate('farmer-game');\n      this.updateGameUI();\n    }\n  }\n\n  // 处理养猪人角色行为\n  private handleFarmerAction(action: 'buyFeed' | 'sellPig' | 'buyPig' | 'upgradePen', amount: number = 1): void {\n    let success = true;\n    \n    switch (action) {\n      case 'buyFeed':\n        success = this.gameState.farmerBuyFeed(amount);\n        break;\n      case 'sellPig':\n        success = this.gameState.farmerSellPig(amount);\n        break;\n      case 'buyPig':\n        success = this.gameState.farmerBuyPig(amount);\n        break;\n      case 'upgradePen':\n        success = this.gameState.farmerUpgradePen();\n        break;\n    }\n    \n    if (success) {\n      this.updateGameUI();\n      this.autoSave();\n    } else {\n      // 可以添加失败提示\n      console.log('Action failed!');\n    }\n  }\n\n  // 保存设置\n  private saveSettings(gameSpeed: number, volume: number): void {\n    this.gameState.setGameSpeed(gameSpeed);\n    this.gameState.setVolume(volume);\n    this.autoSave();\n  }\n\n  // 清除存档\n  private clearSaves(): void {\n    SaveService.clearAllSaves();\n    // 重置游戏状态\n    this.gameState = new GameState();\n    this.updateGameUI();\n  }\n\n  // 解决事件\n  private resolveEvent(eventId: string): void {\n    const success = this.gameState.resolveEvent(eventId);\n    if (success) {\n      this.updateGameUI();\n      this.autoSave();\n    }\n  }\n\n  // 自动保存\n  private autoSave(): void {\n    const state = this.gameState.getState();\n    SaveService.autoSave(state);\n  }\n\n  // 更新游戏UI\n  private updateGameUI(): void {\n    const state = this.gameState.getState();\n    this.farmerGamePage.updateState(state.farmerState, state.marketState, state.events, state.day);\n  }\n\n  // 销毁游戏控制器\n  destroy(): void {\n    if (this.autoSaveInterval) {\n      clearInterval(this.autoSaveInterval);\n    }\n    this.eventService.clear();\n  }\n}","import { GameController } from './controllers/GameController';\n\n// 初始化游戏\nconst app = document.getElementById('app');\nif (app) {\n  const gameController = new GameController(app);\n  gameController.init();\n}"],"names":["Router","rootElement","__publicField","route","element","currentElement","newElement","hash","Farmer","state","amount","price","totalCost","cost","totalPigs","revenuePerPig","totalRevenue","feedConsumption","newReadyPigs","Market","porkPriceVariation","feedPriceVariation","pigletPriceVariation","newPigletPrice","EventManager","day","random","cumulativeProbability","template","count","events","i","event","_a","_b","_c","_d","GameState","savedState","pigletPrice","newEvents","eventId","eventIndex","e","effect","farmerState","speed","volume","Button","text","onClick","className","StartPage","onStartGame","onLoadGame","onSettings","container","title","subtitle","buttonContainer","startButton","loadButton","settingsButton","FarmerGamePage","onBuyFeed","onSellPig","onBuyPig","onUpgradePen","onNextDay","onBack","onResolveEvent","gameContainer","dayDisplay","mainArea","eventArea","contentArea","farmStats","farmStatsTitle","farmStatsContent","marketPanel","marketTitle","marketContent","controls","buyFeedButton","sellPigButton","buyPigButton","upgradeButton","nextDayButton","backButton","availableSpace","maxAffordable","callback","maxAmount","modalOverlay","modal","modalTitle","inputContainer","label","input","confirmButton","cancelButton","eventTitle","eventList","noEvents","todayEvents","eventItem","eventDesc","effectText","effectEl","resolveButton","name","value","item","marketState","SettingsPage","onSaveSettings","onClearSaves","settingsContainer","speedSetting","volumeSetting","saveManagement","saveTitle","clearSavesButton","saveButton","min","max","initialValue","onChange","setting","sliderContainer","slider","valueDisplay","gameSpeed","SaveService","savesJson","saves","save","autoSaveJson","id","updatedSaves","EventService","eventType","callbacks","index","GameController","appElement","autoSave","action","success","app"],"mappings":"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"}